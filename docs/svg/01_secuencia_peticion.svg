<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="706px" preserveAspectRatio="none" style="width:1104px;height:706px;background:#FFFFFF;" version="1.1" viewBox="0 0 1104 706" width="1104px" zoomAndPan="magnify"><title>Petici&#243;n HTTP con interceptor que a&#241;ade JWT</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="314.8168" x="394.0308" y="29.9659">Petici&#243;n HTTP con interceptor que a&#241;ade JWT</text><g><title>Usuario</title><rect fill="#000000" fill-opacity="0.00000" height="498.2963" width="8" x="29.6549" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="33" x2="33" y1="124.1358" y2="622.4321"/></g><g><title>Componente Angular</title><rect fill="#000000" fill-opacity="0.00000" height="498.2963" width="8" x="260.0821" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="263.3894" x2="263.3894" y1="124.1358" y2="622.4321"/></g><g><title>Servicio Angular</title><rect fill="#000000" fill-opacity="0.00000" height="498.2963" width="8" x="408.0936" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="411.7748" x2="411.7748" y1="124.1358" y2="622.4321"/></g><g><title>HttpClient</title><rect fill="#000000" fill-opacity="0.00000" height="498.2963" width="8" x="519.5837" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="523.2008" x2="523.2008" y1="124.1358" y2="622.4321"/></g><g><title>Interceptor JWT</title><rect fill="#000000" fill-opacity="0.00000" height="498.2963" width="8" x="694.5918" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="698.128" x2="698.128" y1="124.1358" y2="622.4321"/></g><g><title>Servicio de Autenticaci.n</title><rect fill="#000000" fill-opacity="0.00000" height="498.2963" width="8" x="899.484" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="903.1993" x2="903.1993" y1="124.1358" y2="622.4321"/></g><g><title>Backend API</title><rect fill="#000000" fill-opacity="0.00000" height="498.2963" width="8" x="1046.8235" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1050.7687" x2="1050.7687" y1="124.1358" y2="622.4321"/></g><g class="participant participant-head" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3098" x="5" y="120.0339">Usuario</text><ellipse cx="33.6549" cy="53.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.6549,61.5679 L33.6549,88.5679 M20.6549,69.5679 L46.6549,69.5679 M33.6549,88.5679 L20.6549,103.5679 M33.6549,88.5679 L46.6549,103.5679" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3098" x="5" y="636.398">Usuario</text><ellipse cx="33.6549" cy="649" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.6549,657 L33.6549,684 M20.6549,665 L46.6549,665 M33.6549,684 L20.6549,699 M33.6549,684 L46.6549,699" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="C"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155.3855" x="186.3894" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.3855" x="193.3894" y="112.0339">Componente Angular</text></g><g class="participant participant-tail" data-participant="C"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155.3855" x="186.3894" y="621.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.3855" x="193.3894" y="643.398">Componente Angular</text></g><g class="participant participant-head" data-participant="S"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.6376" x="351.7748" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.6376" x="358.7748" y="112.0339">Servicio Angular</text></g><g class="participant participant-tail" data-participant="S"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.6376" x="351.7748" y="621.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.6376" x="358.7748" y="643.398">Servicio Angular</text></g><g class="participant participant-head" data-participant="HC"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.7657" x="483.2008" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.7657" x="490.2008" y="112.0339">HttpClient</text></g><g class="participant participant-tail" data-participant="HC"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.7657" x="483.2008" y="621.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.7657" x="490.2008" y="643.398">HttpClient</text></g><g class="participant participant-head" data-participant="I"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.9276" x="640.128" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.9276" x="647.128" y="112.0339">Interceptor JWT</text></g><g class="participant participant-tail" data-participant="I"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.9276" x="640.128" y="621.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.9276" x="647.128" y="643.398">Interceptor JWT</text></g><g class="participant participant-head" data-participant="A"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178.5694" x="814.1993" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164.5694" x="821.1993" y="92.9659">Servicio de Autenticaci&#243;n</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.1196" x="846.9242" y="112.0339">(almacena token)</text></g><g class="participant participant-tail" data-participant="A"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178.5694" x="814.1993" y="621.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164.5694" x="821.1993" y="643.398">Servicio de Autenticaci&#243;n</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.1196" x="846.9242" y="662.466">(almacena token)</text></g><g class="participant participant-head" data-participant="B"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.1097" x="1002.7687" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.1097" x="1009.7687" y="112.0339">Backend API</text></g><g class="participant participant-tail" data-participant="B"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.1097" x="1002.7687" y="621.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.1097" x="1009.7687" y="643.398">Backend API</text></g><g class="message" data-participant-1="U" data-participant-2="C"><polygon fill="#181818" points="252.0821,153.8419,262.0821,157.8419,252.0821,161.8419,256.0821,157.8419" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="33.6549" x2="258.0821" y1="157.8419" y2="157.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.4272" x="40.6549" y="152.0328">Acci&#243;n del usuario (p.ej. ver perfil)</text></g><g class="message" data-participant-1="C" data-participant-2="S"><polygon fill="#181818" points="400.0936,185.5479,410.0936,189.5479,400.0936,193.5479,404.0936,189.5479" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="264.0821" x2="406.0936" y1="189.5479" y2="189.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1661" x="271.0821" y="183.7389">obtenerPerfil()</text></g><g class="message" data-participant-1="S" data-participant-2="HC"><polygon fill="#181818" points="511.5837,217.2539,521.5837,221.2539,511.5837,225.2539,515.5837,221.2539" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="412.0936" x2="517.5837" y1="221.2539" y2="221.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.4901" x="419.0936" y="215.4449">GET /api/perfil</text></g><g class="message" data-participant-1="HC" data-participant-2="I"><polygon fill="#181818" points="686.5918,248.9599,696.5918,252.9599,686.5918,256.9599,690.5918,252.9599" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="523.5837" x2="692.5918" y1="252.9599" y2="252.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.3381" x="530.5837" y="247.1509">intercept(req, next)</text></g><g class="message" data-participant-1="I" data-participant-2="A"><polygon fill="#181818" points="891.484,280.6659,901.484,284.6659,891.484,288.6659,895.484,284.6659" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="698.5918" x2="897.484" y1="284.6659" y2="284.6659"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.2211" x="705.5918" y="278.8569">getToken()</text></g><g class="message" data-participant-1="A" data-participant-2="I"><polygon fill="#181818" points="709.5918,312.3719,699.5918,316.3719,709.5918,320.3719,705.5918,316.3719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="703.5918" x2="902.484" y1="316.3719" y2="316.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.1131" x="715.5918" y="310.5629">token JWT</text></g><g class="message" data-participant-1="I" data-participant-2="I"><line style="stroke:#181818;stroke-width:1;" x1="698.5918" x2="740.5918" y1="383.49" y2="383.49"/><line style="stroke:#181818;stroke-width:1;" x1="740.5918" x2="740.5918" y1="383.49" y2="396.49"/><line style="stroke:#181818;stroke-width:1;" x1="699.5918" x2="740.5918" y1="396.49" y2="396.49"/><polygon fill="#181818" points="709.5918,392.49,699.5918,396.49,709.5918,400.49,705.5918,396.49" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.8471" x="705.5918" y="342.2689">reqClonada = req.clone(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.1322" x="712.3518" y="359.975">Authorization: Bearer &lt;token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.9" x="705.5918" y="377.681">)</text></g><g class="message" data-participant-1="I" data-participant-2="HC"><polygon fill="#181818" points="534.5837,424.196,524.5837,428.196,534.5837,432.196,530.5837,428.196" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="528.5837" x2="697.5918" y1="428.196" y2="428.196"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0081" x="540.5837" y="422.387">next.handle(reqClonada)</text></g><g class="message" data-participant-1="HC" data-participant-2="B"><polygon fill="#181818" points="1038.8235,473.608,1048.8235,477.608,1038.8235,481.608,1042.8235,477.608" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="523.5837" x2="1044.8235" y1="477.608" y2="477.608"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.4901" x="530.5837" y="454.093">GET /api/perfil</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.1322" x="530.5837" y="471.799">Authorization: Bearer &lt;token&gt;</text></g><g class="message" data-participant-1="B" data-participant-2="HC"><polygon fill="#181818" points="534.5837,505.314,524.5837,509.314,534.5837,513.314,530.5837,509.314" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="528.5837" x2="1049.8235" y1="509.314" y2="509.314"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.4131" x="540.5837" y="503.505">200 OK + datos perfil</text></g><g class="message" data-participant-1="HC" data-participant-2="S"><polygon fill="#181818" points="423.0936,537.0201,413.0936,541.0201,423.0936,545.0201,419.0936,541.0201" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="417.0936" x2="522.5837" y1="541.0201" y2="541.0201"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.3291" x="429.0936" y="535.2111">datos perfil</text></g><g class="message" data-participant-1="S" data-participant-2="C"><polygon fill="#181818" points="275.0821,568.7261,265.0821,572.7261,275.0821,576.7261,271.0821,572.7261" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="269.0821" x2="411.0936" y1="572.7261" y2="572.7261"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.3291" x="281.0821" y="566.9171">datos perfil</text></g><g class="message" data-participant-1="C" data-participant-2="U"><polygon fill="#181818" points="44.6549,600.4321,34.6549,604.4321,44.6549,608.4321,40.6549,604.4321" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="38.6549" x2="263.0821" y1="604.4321" y2="604.4321"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.9911" x="50.6549" y="598.6231">muestra datos en pantalla</text></g><!--SRC=[VLF1RjGm4BtxAqQza8XsMt6ie58ILII0n4h9YaikiywmTV7QgUEiA7-5-8J-66CdXKrRE7hcpPitRyPUUKsm9g-aUlXbe6oQDKXhG1bFJbBlhOExaG0VVc97yE5B8mJA4DqC8pfb0GVOY1vTeEZHU3WfxBwtXfW1ChCRDRgJW2gMg9hSWHzsWQcNcDBxlj2AgMAsV49H7ObaPH5J_QCBYyz6pqnAOforDGdgFKeo2Dv-8vF6-cnPdwFaL0VPkehfN8WDd5r10PUGoScqZZICinj9lwBR5Hp8GK_kgzAfA0A-PhpTSdzownXFKb67H1cOtbytS8wzEfzgX7W5dv097jVIuy1Fdb8ZIDu3I-PvZdP4WoXZduhP_iGJHtUdOEYxJmFbjLwirP2aGNa4bXyD45LWo9XXHxu94HQPmTbC6p7J1JpZajgo9dsakJNtZqSJHM-vcyEmWnlhr0_qoiuD0pSBBG95X_0kF5Q1a9BMmBBY4d92n-Q-ZMgkMlFIP1tT8Woq6vLRQ9hwHSU3AQiRD9scv6_pT7OnVxwJrlnNoAnYEv_B0RNgehFi5zppI0D_YOv47ksC4jvSNC3dZ_0QElHscCyb2fZlPH6lOxXu6fxG6mxlHneyEpobAHoDyQWrYjy0]--></g></svg>